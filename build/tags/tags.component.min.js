"use strict";require("bootstrap-tagsinput/src/bootstrap-tagsinput"),require("bootstrap-tagsinput/src/bootstrap-tagsinput.css");var angular=require("angular"),TagsComponentCtrl=function(){function e(e){this.$element=e,this.model=[],this.$model=[],this.$id=Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Date.now().toString(),this.select=$(e.find('input[type="text"]')[0]),this.hidden=angular.element(e.find('input[type="hidden"]')).controller("ngModel")}return e.prototype.RenderInit=function(){var e=this;e.select.tagsinput(e.options||""||{itemValue:e.itemvalue,itemText:e.itemtext,trimValue:!0,confirmKeys:e.confirmkeys?JSON.parse(e.confirmkeys):[13],tagClass:"function"==typeof e.tagClass?e.tagClass:function(t){return e.tagclass}}),e.model.length&&e.model.forEach(function(t){e.select.tagsinput("add",t)}),e.select.on("itemAdded",function(t){e.model.indexOf(t.item)===-1&&(e.model.push(t.item),e.CheckModel())}),e.select.on("itemRemoved",function(t){var i=e.model.indexOf(t.item);i!==-1&&e.model.splice(i,1),e.CheckModel()})},e.prototype.$onInit=function(){var e=this;this.name||(this.name=this.$id),this.required||(this.required=!1),this.ngModel&&(this.ngModel.$render=function(){e.model=Array.isArray(this.$viewValue)?this.$viewValue.slice(0):[],e.RenderInit()})},e.prototype.CheckModel=function(){var e=this;angular.equals(this.model,this.$model)||(this.$model=angular.copy(this.model),this.ngModel.$setValidity("tags-invalid",!!this.model.length),this.ngModel.$setViewValue(this.model,"change"),console.log("this.model, this.$model",this.model,this.$model),e.select.tagsinput("removeAll"),e.model.forEach(function(t){e.select.tagsinput("add",t)}),this.ngChange({$event:{$element:e.$element,model:e.model}}))},e.prototype.$doCheck=function(){this.CheckModel()},e.prototype.$postLink=function(){var e=this;setTimeout(function(){var t=e.$element.find("input");t[0].placeholder=e.placeholder||""},1)},e.prototype.$onDestroy=function(){clearTimeout(this.Timeout),clearTimeout(this.TagsTimeout),this.select.tagsinput("destroy")},e}();TagsComponentCtrl.$inject=["$element"],require("./tags.less");var TagsComponent=function(){function e(){this.require={ngModel:"^?",form:"^^?"},this.bindings={ngChange:"&",placeholder:"<",label:"<",name:"<",required:"<",note:"<",disabled:"<",options:"<",typeaheadSource:"<",tagclass:"<",itemvalue:"@",itemtext:"@",confirmKeys:"@"},this.template=require("./tags.html"),this.controller=TagsComponentCtrl}return e}();exports.TagsComponent=TagsComponent;